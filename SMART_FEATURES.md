# 🚀 智能命令管理功能

Command Manager 现在支持智能检测终端窗口并提供快速命令粘贴功能！

## ✨ 新功能特性

### 🎯 智能终端检测
- **自动识别终端应用**: Terminal.app, iTerm2, VS Code, Cursor等
- **实时窗口监控**: 检测当前活动窗口是否为终端
- **智能关键词识别**: 识别包含bash, zsh, terminal等关键词的窗口

### ⚡ 悬浮命令面板
- **快速搜索**: 实时搜索命令名称、内容和描述
- **键盘导航**: 使用方向键快速选择命令
- **一键粘贴**: 选择命令后自动复制并粘贴到终端
- **美观界面**: 半透明毛玻璃效果，苹果风格设计

### 📊 使用统计
- **使用次数统计**: 记录每个命令的使用频率
- **最近使用**: 显示最近使用的命令
- **智能排序**: 根据使用频率智能推荐命令

## ⌨️ 快捷键说明

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Cmd/Ctrl + Shift + Space` | 显示悬浮面板 | 在任何地方都可以使用 |
| `Cmd/Ctrl + Shift + K` | 智能终端面板 | 仅在终端激活时有效 |
| `Cmd/Ctrl + Shift + C` | 显示/隐藏主窗口 | 原有功能 |

## 🎮 悬浮面板操作

### 键盘操作
- `↑/↓` - 上下导航选择命令
- `Enter` - 选择当前命令并粘贴
- `Esc` - 关闭悬浮面板
- 直接输入 - 实时搜索命令

### 鼠标操作
- 点击命令项 - 选择并粘贴命令
- 点击搜索框 - 聚焦搜索
- 点击面板外 - 自动关闭面板

## 🔧 支持的终端应用

### macOS
- **Terminal.app** - 系统自带终端
- **iTerm2** - 专业终端工具
- **Hyper** - 现代化终端
- **Alacritty** - 高性能终端
- **Kitty** - GPU加速终端

### 编辑器内置终端
- **VS Code** - 内置终端面板
- **Cursor** - AI编程工具
- **WebStorm** - JetBrains IDE
- **PyCharm** - Python IDE
- **IntelliJ IDEA** - Java IDE

### 其他
- **Tabby** - 跨平台终端
- **Terminus** - 现代终端
- **WezTerm** - Rust编写的终端

## 🎯 使用场景

### 1. 开发工作流
```bash
# 在终端中按 Cmd+Shift+K
# 搜索 "git" 相关命令
# 选择 "git status" 并自动粘贴
```

### 2. 服务器管理
```bash
# 在SSH连接中使用
# 快速访问常用的系统命令
# 一键执行复杂的运维脚本
```

### 3. 项目开发
```bash
# 在项目目录中
# 快速访问npm、yarn、docker命令
# 提高开发效率
```

## 🛠️ 技术实现

### 窗口检测机制
- 使用 `active-win` 库检测活动窗口
- 每秒检查一次窗口状态
- 支持应用名称和窗口标题双重识别

### 命令粘贴机制
- 使用 `robotjs` 模拟键盘操作
- 先复制到剪贴板，再模拟 Cmd/Ctrl+V
- 支持跨平台粘贴操作

### 性能优化
- 命令数据缓存，减少API调用
- 窗口检测节流，避免频繁检查
- 悬浮窗口预加载，快速响应

## 📈 使用统计功能

### 自动统计
- 每次使用命令自动增加使用次数
- 记录最后使用时间
- 更新命令热度排序

### 智能推荐
- 根据使用频率排序命令
- 优先显示常用命令
- 个性化命令推荐

## 🔍 故障排除

### 悬浮面板不显示
1. 检查快捷键是否冲突
2. 确认应用有辅助功能权限
3. 重启应用重新初始化

### 终端检测不准确
1. 添加自定义终端应用名称
2. 检查窗口标题是否包含关键词
3. 手动使用通用快捷键

### 命令粘贴失败
1. 确认应用有辅助功能权限
2. 检查终端是否支持粘贴
3. 手动从剪贴板粘贴

## 🎨 自定义配置

### 添加自定义终端
```javascript
// 在 window-detector.js 中添加
windowDetector.addTerminalApp('YourTerminalApp');
```

### 添加关键词
```javascript
// 添加自定义关键词识别
windowDetector.addTerminalKeyword('your-keyword');
```

### 调整检测频率
```javascript
// 设置检测间隔（毫秒）
windowDetector.setCheckInterval(500);
```

## 🚀 未来计划

- [ ] 支持更多终端应用
- [ ] 智能命令补全
- [ ] 上下文相关推荐
- [ ] 命令执行历史
- [ ] 多终端会话管理
- [ ] 云端命令同步

## 💡 使用技巧

1. **快速搜索**: 输入命令关键词快速定位
2. **收藏常用**: 将常用命令设为收藏，优先显示
3. **分类管理**: 合理分类命令，提高查找效率
4. **快捷键记忆**: 熟练使用快捷键，提升操作速度
5. **定期清理**: 删除不常用的命令，保持列表整洁

---

**🎉 享受智能化的命令管理体验！**
